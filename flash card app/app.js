let kanjiData = [
  {
    "kanji": "日",
    "meaning": "day",
    "onyomi": ["ニチ"],
    "kunyomi": ["ひ", "か"]
  },
  {
    "kanji": "月",
    "meaning": "month",
    "onyomi": ["ゲツ", "ガツ"],
    "kunyomi": ["つき"]
  },
  {
    "kanji": "水",
    "meaning": "water",
    "onyomi": ["スイ"],
    "kunyomi": ["みず"]
  },
  {
    "kanji": "火",
    "meaning": "fire",
    "onyomi": ["カ"],
    "kunyomi": ["ひ", "ほ"]
  },
  {
    "kanji": "木",
    "meaning": "tree",
    "onyomi": ["モク", "ボク"],
    "kunyomi": ["き", "こ"]
  },
  {
    "kanji": "金",
    "meaning": "gold",
    "onyomi": ["キン", "コン"],
    "kunyomi": ["かね", "かな"]
  },
  {
    "kanji": "土",
    "meaning": "earth",
    "onyomi": ["ド", "ト"],
    "kunyomi": ["つち"]
  },
  {
    "kanji": "人",
    "meaning": "person",
    "onyomi": ["ジン", "ニン"],
    "kunyomi": ["ひと"]
  },
  {
    "kanji": "大",
    "meaning": "big",
    "onyomi": ["ダイ", "タイ"],
    "kunyomi": ["おお"]
  },
  {
    "kanji": "小",
    "meaning": "small",
    "onyomi": ["ショウ"],
    "kunyomi": ["ちい", "こ", "お"]
  },
  {
    "kanji": "山",
    "meaning": "mountain",
    "onyomi": ["サン", "セン"],
    "kunyomi": ["やま"]
  },
  {
    "kanji": "川",
    "meaning": "river",
    "onyomi": ["セン"],
    "kunyomi": ["かわ"]
  },
  {
    "kanji": "天",
    "meaning": "heaven",
    "onyomi": ["テン"],
    "kunyomi": ["あま", "あめ"]
  },
  {
    "kanji": "気",
    "meaning": "spirit",
    "onyomi": ["キ", "ケ"],
    "kunyomi": []
  },
  {
    "kanji": "食",
    "meaning": "eat",
    "onyomi": ["ショク", "ジキ"],
    "kunyomi": ["た", "く"]
  },
  {
    "kanji": "飲",
    "meaning": "drink",
    "onyomi": ["イン"],
    "kunyomi": ["の"]
  },
  {
    "kanji": "見",
    "meaning": "see",
    "onyomi": ["ケン"],
    "kunyomi": ["み"]
  },
  {
    "kanji": "聞",
    "meaning": "hear",
    "onyomi": ["ブン", "モン"],
    "kunyomi": ["き"]
  },
  {
    "kanji": "話",
    "meaning": "speak",
    "readings": ["わ", "はな"]
  },
  {
    "kanji": "読",
    "meaning": "read",
    "readings": ["どく", "よ"]
  },
  {
    "kanji": "書",
    "meaning": "write",
    "readings": ["しょ", "か"]
  },
  {
    "kanji": "行",
    "meaning": "go",
    "readings": ["こう", "い", "おこな"]
  },
  {
    "kanji": "来",
    "meaning": "come",
    "readings": ["らい", "く", "きた"]
  },
  {
    "kanji": "出",
    "meaning": "exit",
    "readings": ["しゅつ", "で", "だ"]
  },
  {
    "kanji": "入",
    "meaning": "enter",
    "readings": ["にゅう", "はい", "い"]
  },
  {
    "kanji": "学",
    "meaning": "study",
    "readings": ["がく", "まな"]
  },
  {
    "kanji": "校",
    "meaning": "school",
    "readings": ["こう"]
  },
  {
    "kanji": "生",
    "meaning": "life",
    "readings": ["せい", "しょう", "い", "なま", "う"]
  },
  {
    "kanji": "死",
    "meaning": "death",
    "readings": ["し", "しに"]
  },
  {
    "kanji": "時",
    "meaning": "time",
    "readings": ["じ", "とき"]
  },
  {
    "kanji": "分",
    "meaning": "minute",
    "readings": ["ぶん", "ふん", "わ"]
  },
  {
    "kanji": "今",
    "meaning": "now",
    "readings": ["こん", "いま"]
  },
  {
    "kanji": "前",
    "meaning": "before",
    "readings": ["ぜん", "まえ"]
  },
  {
    "kanji": "後",
    "meaning": "after",
    "readings": ["ご", "あと", "うし"]
  },
  {
    "kanji": "上",
    "meaning": "up",
    "readings": ["じょう", "うえ", "あ", "のぼ"]
  },
  {
    "kanji": "下",
    "meaning": "down",
    "readings": ["か", "した", "さ", "くだ"]
  },
  {
    "kanji": "左",
    "meaning": "left",
    "readings": ["さ", "ひだり"]
  },
  {
    "kanji": "右",
    "meaning": "right",
    "readings": ["う", "ゆう", "みぎ"]
  },
  {
    "kanji": "中",
    "meaning": "middle",
    "readings": ["ちゅう", "なか", "うち"]
  },
  {
    "kanji": "外",
    "meaning": "outside",
    "readings": ["がい", "そと", "はず"]
  },
  {
    "kanji": "内",
    "meaning": "inside",
    "readings": ["ない", "うち"]
  },
  {
    "kanji": "白",
    "meaning": "white",
    "readings": ["はく", "しろ", "しら"]
  },
  {
    "kanji": "黒",
    "meaning": "black",
    "readings": ["こく", "くろ"]
  },
  {
    "kanji": "赤",
    "meaning": "red",
    "readings": ["せき", "あか", "あか"]
  },
  {
    "kanji": "青",
    "meaning": "blue",
    "readings": ["せい", "しょう", "あお"]
  },
  {
    "kanji": "一",
    "meaning": "one",
    "readings": ["いち", "ひと"]
  },
  {
    "kanji": "二",
    "meaning": "two",
    "readings": ["に", "ふた"]
  },
  {
    "kanji": "三",
    "meaning": "three",
    "readings": ["さん", "み"]
  },
  {
    "kanji": "四",
    "meaning": "four",
    "readings": ["し", "よん", "よ"]
  },
  {
    "kanji": "五",
    "meaning": "five",
    "readings": ["ご", "いつ"]
  },
  {
    "kanji": "六",
    "meaning": "six",
    "readings": ["ろく", "む"]
  },
  {
    "kanji": "七",
    "meaning": "seven",
    "readings": ["しち", "なな"]
  },
  {
    "kanji": "八",
    "meaning": "eight",
    "readings": ["はち", "や"]
  },
  {
    "kanji": "九",
    "meaning": "nine",
    "readings": ["く", "きゅう", "ここの"]
  },
  {
    "kanji": "十",
    "meaning": "ten",
    "readings": ["じゅう", "とお"]
  },
  {
    "kanji": "百",
    "meaning": "hundred",
    "readings": ["ひゃく", "もも"]
  },
  {
    "kanji": "千",
    "meaning": "thousand",
    "readings": ["せん", "ち"]
  },
  {
    "kanji": "万",
    "meaning": "ten thousand",
    "readings": ["まん", "よろず"]
  },
  {
    "kanji": "円",
    "meaning": "yen",
    "readings": ["えん", "まる"]
  },
  {
    "kanji": "年",
    "meaning": "year",
    "readings": ["ねん", "とし"]
  },
  {
    "kanji": "本",
    "meaning": "book",
    "readings": ["ほん", "もと"]
  },
  {
    "kanji": "何",
    "meaning": "what",
    "readings": ["か", "なに"]
  },
  {
    "kanji": "毎",
    "meaning": "every",
    "readings": ["まい"]
  },
  {
    "kanji": "半",
    "meaning": "half",
    "readings": ["はん", "なか"]
  },
  {
    "kanji": "母",
    "meaning": "mother",
    "readings": ["ぼ", "はは"]
  },
  {
    "kanji": "父",
    "meaning": "father",
    "readings": ["ふ", "ちち"]
  },
  {
    "kanji": "兄",
    "meaning": "older brother",
    "readings": ["けい", "きょう", "あに"]
  },
  {
    "kanji": "姉",
    "meaning": "older sister",
    "readings": ["し", "あね"]
  },
  {
    "kanji": "弟",
    "meaning": "younger brother",
    "readings": ["てい", "だい", "おとうと"]
  },
  {
    "kanji": "妹",
    "meaning": "younger sister",
    "readings": ["まい", "いもうと"]
  },
  {
    "kanji": "子",
    "meaning": "child",
    "readings": ["し", "す", "こ"]
  },
  {
    "kanji": "女",
    "meaning": "woman",
    "readings": ["じょ", "にょ", "おんな"]
  },
  {
    "kanji": "男",
    "meaning": "man",
    "readings": ["だん", "なん", "おとこ"]
  },
  {
    "kanji": "高",
    "meaning": "high",
    "readings": ["こう", "たか"]
  },
  {
    "kanji": "安",
    "meaning": "cheap",
    "readings": ["あん", "やす"]
  },
  {
    "kanji": "新",
    "meaning": "new",
    "readings": ["しん", "あら", "にい"]
  },
  {
    "kanji": "古",
    "meaning": "old",
    "readings": ["こ", "ふる"]
  },
  {
    "kanji": "多",
    "meaning": "many",
    "readings": ["た", "おお"]
  },
  {
    "kanji": "少",
    "meaning": "few",
    "readings": ["しょう", "すく", "すこ"]
  },
  {
    "kanji": "長",
    "meaning": "long",
    "readings": ["ちょう", "なが"]
  },
  {
    "kanji": "短",
    "meaning": "short",
    "readings": ["たん", "みじか"]
  },
  {
    "kanji": "早",
    "meaning": "early",
    "readings": ["そう", "はや"]
  },
  {
    "kanji": "遅",
    "meaning": "late",
    "readings": ["ち", "おそ"]
  },
  {
    "kanji": "好",
    "meaning": "like",
    "readings": ["こう", "す", "この"]
  },
  {
    "kanji": "悪",
    "meaning": "bad",
    "readings": ["あく", "わる"]
  },
  {
    "kanji": "暑",
    "meaning": "hot",
    "readings": ["しょ", "あつ"]
  },
  {
    "kanji": "寒",
    "meaning": "cold",
    "readings": ["かん", "さむ"]
  },
  {
    "kanji": "雨",
    "meaning": "rain",
    "readings": ["う", "あめ", "あま"]
  },
  {
    "kanji": "雪",
    "meaning": "snow",
    "readings": ["せつ", "ゆき"]
  },
  {
    "kanji": "電",
    "meaning": "electricity",
    "readings": ["でん"]
  },
  {
    "kanji": "車",
    "meaning": "car",
    "readings": ["しゃ", "くるま"]
  },
  {
    "kanji": "店",
    "meaning": "shop",
    "readings": ["てん", "みせ"]
  },
  {
    "kanji": "買",
    "meaning": "buy",
    "readings": ["ばい", "か"]
  },
  {
    "kanji": "売",
    "meaning": "sell",
    "readings": ["ばい", "う"]
  },
  {
    "kanji": "駅",
    "meaning": "station",
    "readings": ["えき"]
  },
  {
    "kanji": "道",
    "meaning": "road",
    "readings": ["どう", "みち"]
  },
  {
    "kanji": "家",
    "meaning": "house",
    "readings": ["か", "け", "いえ"]
  },
  {
    "kanji": "室",
    "meaning": "room",
    "readings": ["しつ", "むろ"]
  },
  {
    "kanji": "国",
    "meaning": "country",
    "readings": ["こく", "くに"]
  },
  {
    "kanji": "町",
    "meaning": "town",
    "readings": ["ちょう", "まち"]
  },
  {
    "kanji": "村",
    "meaning": "village",
    "readings": ["そん", "むら"]
  },
  {
    "kanji": "花",
    "meaning": "flower",
    "readings": ["か", "はな"]
  },
  {
    "kanji": "魚",
    "meaning": "fish",
    "readings": ["ぎょ", "うお", "さかな"]
  },
  {
    "kanji": "鳥",
    "meaning": "bird",
    "readings": ["ちょう", "とり"]
  },
  {
    "kanji": "犬",
    "meaning": "dog",
    "readings": ["けん", "いぬ"]
  },
  {
    "kanji": "猫",
    "meaning": "cat",
    "readings": ["びょう", "ねこ"]
  },
  {
    "kanji": "牛",
    "meaning": "cow",
    "readings": ["ぎゅう", "うし"]
  },
  {
    "kanji": "馬",
    "meaning": "horse",
    "readings": ["ば", "うま"]
  },
  {
    "kanji": "口",
    "meaning": "mouth",
    "readings": ["こう", "くち"]
  },
  {
    "kanji": "目",
    "meaning": "eye",
    "readings": ["もく", "め"]
  },
  {
    "kanji": "耳",
    "meaning": "ear",
    "readings": ["じ", "みみ"]
  },
  {
    "kanji": "手",
    "meaning": "hand",
    "readings": ["しゅ", "て"]
  },
  {
    "kanji": "足",
    "meaning": "foot",
    "readings": ["そく", "あし"]
  },
  {
    "kanji": "力",
    "meaning": "power",
    "readings": ["りょく", "りき", "ちから"]
  },
  {
    "kanji": "音",
    "meaning": "sound",
    "readings": ["おん", "おと", "ね"]
  },
  {
    "kanji": "休",
    "meaning": "rest",
    "readings": ["きゅう", "やす"]
  },
  {
    "kanji": "作",
    "meaning": "make",
    "readings": ["さく", "さ", "つく"]
  },
  {
    "kanji": "止",
    "meaning": "stop",
    "readings": ["し", "と", "や"]
  },
  {
    "kanji": "開",
    "meaning": "open",
    "readings": ["かい", "あ", "ひら"]
  },
  {
    "kanji": "閉",
    "meaning": "close",
    "readings": ["へい", "し", "と"]
  },
  {
    "kanji": "正",
    "meaning": "correct",
    "readings": ["せい", "しょう", "ただ", "まさ"]
  },
  {
    "kanji": "動",
    "meaning": "move",
    "readings": ["どう", "うご"]
  },
  {
    "kanji": "同",
    "meaning": "same",
    "readings": ["どう", "おな"]
  },
  {
    "kanji": "名",
    "meaning": "name",
    "readings": ["めい", "みょう", "な"]
  },
  {
    "kanji": "字",
    "meaning": "character",
    "readings": ["じ", "あざ"]
  },
  {
    "kanji": "文",
    "meaning": "sentence",
    "readings": ["ぶん", "もん", "ふみ"]
  },
  {
    "kanji": "語",
    "meaning": "language",
    "readings": ["ご", "かた"]
  },
  {
    "kanji": "英",
    "meaning": "English",
    "readings": ["えい"]
  },
  {
    "kanji": "医",
    "meaning": "doctor",
    "readings": ["い"]
  },
  {
    "kanji": "者",
    "meaning": "person",
    "readings": ["しゃ", "もの"]
  },
  {
    "kanji": "事",
    "meaning": "thing",
    "readings": ["じ", "こと", "つか"]
  },
  {
    "kanji": "物",
    "meaning": "thing",
    "readings": ["ぶつ", "もつ", "もの"]
  },
  {
    "kanji": "方",
    "meaning": "direction",
    "readings": ["ほう", "かた"]
  },
  {
    "kanji": "有",
    "meaning": "have",
    "readings": ["ゆう", "う", "あ"]
  },
  {
    "kanji": "無",
    "meaning": "nothing",
    "readings": ["む", "な"]
  },
  {
    "kanji": "思",
    "meaning": "think",
    "readings": ["し", "おも"]
  },
  {
    "kanji": "知",
    "meaning": "know",
    "readings": ["ち", "し"]
  },
  {
    "kanji": "心",
    "meaning": "heart",
    "readings": ["しん", "こころ"]
  },
  {
    "kanji": "体",
    "meaning": "body",
    "readings": ["たい", "からだ"]
  },
  {
    "kanji": "病",
    "meaning": "ill",
    "readings": ["びょう", "や", "やまい"]
  },
  {
    "kanji": "痛",
    "meaning": "pain",
    "readings": ["つう", "いた"]
  },
  {
    "kanji": "楽",
    "meaning": "comfortable",
    "readings": ["らく", "たの"]
  },
  {
    "kanji": "薬",
    "meaning": "medicine",
    "readings": ["やく", "くすり"]
  },
  {
    "kanji": "食",
    "meaning": "food",
    "readings": ["しょく", "たべもの"]
  },
  {
    "kanji": "飲",
    "meaning": "drink",
    "readings": ["いん", "の"]
  },
  {
    "kanji": "着",
    "meaning": "wear",
    "readings": ["ちゃく", "き", "つ"]
  },
  {
    "kanji": "住",
    "meaning": "live",
    "readings": ["じゅう", "す"]
  },
  {
    "kanji": "待",
    "meaning": "wait",
    "readings": ["たい", "ま"]
  },
  {
    "kanji": "持",
    "meaning": "hold",
    "readings": ["じ", "も"]
  },
  {
    "kanji": "起",
    "meaning": "wake up",
    "readings": ["き", "お"]
  },
  {
    "kanji": "寝",
    "meaning": "sleep",
    "readings": ["しん", "ね"]
  },
  {
    "kanji": "帰",
    "meaning": "return",
    "readings": ["き", "かえ"]
  },
  {
    "kanji": "歩",
    "meaning": "walk",
    "readings": ["ほ", "ある", "あゆ"]
  },
  {
    "kanji": "走",
    "meaning": "run",
    "readings": ["そう", "はし"]
  },
  {
    "kanji": "飛",
    "meaning": "fly",
    "readings": ["ひ", "と"]
  },
  {
    "kanji": "立",
    "meaning": "stand",
    "readings": ["りつ", "た"]
  },
  {
    "kanji": "座",
    "meaning": "sit",
    "readings": ["ざ", "すわ"]
  },
  {
    "kanji": "会",
    "meaning": "meet",
    "readings": ["かい", "あ"]
  },
  {
    "kanji": "言",
    "meaning": "say",
    "readings": ["げん", "ごん", "い", "こと"]
  },
  {
    "kanji": "問",
    "meaning": "ask",
    "readings": ["もん", "と", "とい"]
  },
  {
    "kanji": "答",
    "meaning": "answer",
    "readings": ["とう", "こた"]
  },
  {
    "kanji": "教",
    "meaning": "teach",
    "readings": ["きょう", "おし", "おそ"]
  },
  {
    "kanji": "習",
    "meaning": "learn",
    "readings": ["しゅう", "なら"]
  },
  {
    "kanji": "考",
    "meaning": "think",
    "readings": ["こう", "かんが"]
  },
  {
    "kanji": "意",
    "meaning": "meaning",
    "readings": ["い"]
  },
  {
    "kanji": "味",
    "meaning": "taste",
    "readings": ["み", "あじ"]
  },
  {
    "kanji": "色",
    "meaning": "color",
    "readings": ["しょく", "いろ"]
  },
  {
    "kanji": "用",
    "meaning": "use",
    "readings": ["よう", "もち"]
  },
  {
    "kanji": "度",
    "meaning": "degree",
    "readings": ["ど", "たび"]
  },
  {
    "kanji": "重",
    "meaning": "heavy",
    "readings": ["じゅう", "ちょう", "え", "おも"]
  },
  {
    "kanji": "軽",
    "meaning": "light",
    "readings": ["けい", "かる", "かろ"]
  },
  {
    "kanji": "近",
    "meaning": "near",
    "readings": ["きん", "ちか"]
  },
  {
    "kanji": "遠",
    "meaning": "far",
    "readings": ["えん", "とお"]
  },
  {
    "kanji": "強",
    "meaning": "strong",
    "readings": ["きょう", "ごわ", "つよ"]
  },
  {
    "kanji": "弱",
    "meaning": "weak",
    "readings": ["じゃく", "よわ"]
  },
  {
    "kanji": "広",
    "meaning": "wide",
    "readings": ["こう", "ひろ"]
  },
  {
    "kanji": "狭",
    "meaning": "narrow",
    "readings": ["きょう", "せま", "せば"]
  },
  {
    "kanji": "明",
    "meaning": "bright",
    "readings": ["めい", "みょう", "あ", "あか"]
  },
  {
    "kanji": "暗",
    "meaning": "dark",
    "readings": ["あん", "くら"]
  },
  {
    "kanji": "晴",
    "meaning": "clear",
    "readings": ["せい", "は"]
  },
  {
    "kanji": "曇",
    "meaning": "cloudy",
    "readings": ["どん", "くも"]
  },
  {
    "kanji": "風",
    "meaning": "wind",
    "readings": ["ふう", "ふ", "かぜ"]
  },
  {
    "kanji": "雲",
    "meaning": "cloud",
    "readings": ["うん", "くも"]
  },
  {
    "kanji": "夏",
    "meaning": "summer",
    "readings": ["か", "げ", "なつ"]
  },
  {
    "kanji": "冬",
    "meaning": "winter",
    "readings": ["とう", "ふゆ"]
  },
  {
    "kanji": "春",
    "meaning": "spring",
    "readings": ["しゅん", "はる"]
  },
  {
    "kanji": "秋",
    "meaning": "autumn",
    "readings": ["しゅう", "あき"]
  }
];
let currentIndex = 0;

function loadKanji() {
    loadProgress();
    displayKanji();
}

function displayKanji() {
    const kanjiDisplay = document.getElementById('kanji-display');
    const answerDisplay = document.getElementById('answer-display');
    const meaning = document.getElementById('meaning');
    const onyomiDisplay = document.getElementById('onyomi-readings');
    const kunyomiDisplay = document.getElementById('kunyomi-readings');
    const cardCounter = document.getElementById('card-counter');
    const progressFill = document.getElementById('progress-fill');
    const progressPercent = document.getElementById('progress-percent');

    const currentKanji = kanjiData[currentIndex];

    kanjiDisplay.textContent = currentKanji.kanji;
    meaning.textContent = currentKanji.meaning;

    // Handle different data formats
    let onyomiReadings = [];
    let kunyomiReadings = [];

    if (currentKanji.onyomi && currentKanji.kunyomi) {
        // Format 1: Separate onyomi and kunyomi arrays
        onyomiReadings = currentKanji.onyomi;
        kunyomiReadings = currentKanji.kunyomi;
    } else if (currentKanji.readings) {
        // Format 2: Single readings array - classify intelligently
        // Most N5 kanji readings are kunyomi, so default to kunyomi unless clearly onyomi
        currentKanji.readings.forEach(reading => {
            // Check if reading contains katakana (definitely onyomi)
            const hasKatakana = /[ァ-ヾ]/u.test(reading);

            if (hasKatakana) {
                onyomiReadings.push(reading);
            } else {
                // For hiragana readings, check for definite onyomi patterns
                // Be conservative - only classify as onyomi if very clear
                const definiteOnyomiPatterns = [
                    'こう', 'かい', 'けん', 'せい', 'たい', 'てい', 'どう', 'とう',
                    'よう', 'りょう', 'しょう', 'じょう', 'ちょう', 'きょう', 'ぎょう',
                    'ひょう', 'りゅう', 'しゅう', 'ちゅう', 'にゅう', 'きゅう', 'じゅう',
                    'びょう', 'ぴょう', 'みょう', 'にょう', 'りょう', 'きゅう', 'ぎゅう',
                    'びゅう', 'ぴゅう', 'みゅう', 'にゅう', 'りゅう', 'しゅう', 'ちゅう',
                    'にゅう', 'きゅう', 'じゅう', 'びゅう', 'ぴゅう', 'みゅう', 'にゅう',
                    'りゅう', 'しゅう', 'ちゅう', 'にゅう', 'きゅう', 'じゅう'
                ];

                // Also check for common onyomi endings
                const onyomiEndings = ['う', 'く', 'つ', 'ん', 'ん', 'い', 'え', 'お'];
                const hasOnyomiEnding = onyomiEndings.some(ending => reading.endsWith(ending));

                const isDefiniteOnyomi = definiteOnyomiPatterns.includes(reading) ||
                                       (hasOnyomiEnding && reading.length <= 3);

                if (isDefiniteOnyomi) {
                    onyomiReadings.push(reading);
                } else {
                    kunyomiReadings.push(reading);
                }
            }
        });
    }

    // Ensure we don't leave readings unassigned
    if (kunyomiReadings.length === 0 && onyomiReadings.length === 0 && currentKanji.readings) {
        kunyomiReadings = currentKanji.readings;
    }

    // Display on'yomi readings (Chinese origin)
    if (onyomiReadings.length > 0) {
        onyomiDisplay.textContent = onyomiReadings.join(', ');
        onyomiDisplay.parentElement.style.display = 'block';
    } else {
        onyomiDisplay.parentElement.style.display = 'none';
    }

    // Display kun'yomi readings (Japanese origin) - emphasized as requested
    if (kunyomiReadings.length > 0) {
        kunyomiDisplay.textContent = kunyomiReadings.join(', ');
        kunyomiDisplay.parentElement.style.display = 'block';
        // Add emphasis to kun'yomi as requested
        kunyomiDisplay.parentElement.classList.add('emphasized');
    } else {
        kunyomiDisplay.parentElement.style.display = 'none';
    }

    answerDisplay.classList.add('hidden');
    cardCounter.textContent = `Card ${currentIndex + 1} of ${kanjiData.length}`;

    // Update progress bar
    const progress = ((currentIndex + 1) / kanjiData.length) * 100;
    progressFill.style.width = `${progress}%`;
    progressPercent.textContent = `${Math.round(progress)}%`;

    // Show N5 level badge (all kanji in this app are N5 level)
    const levelBadge = document.querySelector('.level-badge');
    if (levelBadge) {
        levelBadge.style.display = 'block';
    }
}

function showAnswer() {
    const answerDisplay = document.getElementById('answer-display');
    answerDisplay.classList.remove('hidden');
}

function nextKanji() {
    currentIndex = (currentIndex + 1) % kanjiData.length;
    displayKanji();
    saveProgress();
}

function previousKanji() {
    currentIndex = (currentIndex - 1 + kanjiData.length) % kanjiData.length;
    displayKanji();
    saveProgress();
}

function saveProgress() {
    localStorage.setItem('currentIndex', currentIndex);
}

function loadProgress() {
    const savedIndex = localStorage.getItem('currentIndex');
    if (savedIndex !== null) {
        currentIndex = parseInt(savedIndex, 10);
    }
}

document.getElementById('show-answer').addEventListener('click', showAnswer);
document.getElementById('next').addEventListener('click', nextKanji);
document.getElementById('previous').addEventListener('click', previousKanji);

loadKanji();
